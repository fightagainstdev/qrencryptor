"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{3957:function(e,t,n){var r=n(5318),i=n(862);t.Z=void 0;var a=i(n(7294)),o=(0,r(n(2108)).default)(a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=o},7315:function(e,t,n){var r=n(5318),i=n(862);t.Z=void 0;var a=i(n(7294)),o=(0,r(n(2108)).default)(a.createElement("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");t.Z=o},4779:function(e,t,n){var r=n(5318),i=n(862);t.Z=void 0;var a=i(n(7294)),o=(0,r(n(2108)).default)(a.createElement("path",{d:"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeft");t.Z=o},125:function(e,t,n){n.r(t),n.d(t,{default:function(){return et}});var r=n(5893),i=n(7294),a=n(1163),o=n(5697),s=n.n(o),c=n(4051),l=n.n(c),u=n(8523),d=n(7197),p=n(8478);function f(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}var h=n(6869),m=function(){var e,t=(e=l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.ready;case 2:return n=(t=h).to_base64(t.randombytes_buf(16),t.base64_variants.URLSAFE_NO_PADDING),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,s,"next",e)}function s(e){f(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),x=n(7618),y=n(3341),g=n(5906),b=n(1120),v=n(5046),j=n(7155),k=n(1749),Z=n(5357),_=n(1594),F=n(2876),w=n(9905),S=n(282),C=n(9895),I=n(2318),K=n(3426),P=n(5477),N=n(9589),B=n(2267),T=n(7812),R=n(5685),W=n(7083),A=n(3950),O=n(7726),z=n(7239),E=n(6210),D=n(7879),L=n(3099),M=n(9985),q=n(8270),H=n(6081),G=n(6037),V=n(366),$=n(3957),U=n(4779),J=n(2109),Q=n(2822),X=n(998),Y=n(5757),ee=n(1860),te=n(8428),ne=n(20);function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ie(a,r,i,o,s,"next",e)}function s(e){ie(a,r,i,o,s,"throw",e)}o(void 0)}))}}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oe(e,t,n[t])}))}return e}function ce(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var le,ue,de,pe,fe,he,me=(0,b.Z)((function(e){return{root:{width:"100%"},offline:{fontSize:12,float:"right",color:e.palette.diamondBlack.main},stepper:{color:e.palette.mineShaft.main,backgroundColor:"transparent"},stepIcon:{"&$activeStepIcon":{color:e.palette.emperor.main},"&$completedStepIcon":{color:e.palette.emperor.main}},activeStepIcon:{},completedStepIcon:{},button:oe({marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.mercury.light,"&:hover":{backgroundColor:e.palette.mercury.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),browseButton:oe({padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.alto.light,"&:hover":{backgroundColor:e.palette.alto.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),resetButton:oe({marginLeft:8,padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.flower.text,backgroundColor:e.palette.flower.main,"&:hover":{backgroundColor:e.palette.flower.light},transition:"background-color 0.2s ease-out"},"transition","color .01s"),backButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.mercury.main,transition:"color .01s"},nextButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.primary.main,color:e.palette.white.main,"&:hover":{backgroundColor:e.palette.mineShaft.main},transition:"color .01s"},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3),boxShadow:"rgba(149, 157, 165, 0.4) 0px 8px 24px",borderRadius:"8px"},input:{display:"none"},fileArea:{padding:"20px",border:"5px dashed",borderColor:e.palette.gallery.main,borderRadius:"14px",marginBottom:"10px",alignItems:"center",justifyContent:"center",flexDirection:"column"},filesInfo:oe({float:"right",marginTop:15,textTransform:"none",color:e.palette.cottonBoll.text,transition:"background-color 0.2s ease-out"},"transition","color .01s"),filesPaper:{marginBottom:15,overflow:"auto",maxHeight:"280px",backgroundColor:"transparent"},filesList:{display:"flex",flex:"1",flexWrap:"wrap",alignContent:"center",justifyContent:"center"},filesListItem:{backgroundColor:"#f3f3f3",borderRadius:"8px",padding:15},filesListItemText:{width:"100px",maxWidth:"150px",minHeight:"50px",maxHeight:"50px"}}})),xe=[],ye=0,ge="secretKey";function be(){var e=me(),t=(0,a.useRouter)(),n=t.query,o=(0,i.useState)(null),s=(o[0],o[1]),c=(0,i.useState)(0),f=c[0],h=c[1],b=(0,i.useState)([]),re=b[0],ie=b[1],oe=(0,i.useState)(0),be=oe[0],ve=oe[1],je=(0,i.useState)(0),ke=je[0],Ze=je[1],_e=(0,i.useState)(),Fe=_e[0],we=_e[1],Se=(0,i.useState)(!1),Ce=Se[0],Ie=Se[1],Ke=(0,i.useState)(),Pe=Ke[0],Ne=Ke[1],Be=(0,i.useState)(),Te=Be[0],Re=Be[1],We=(0,i.useState)(!1),Ae=We[0],Oe=We[1],ze=(0,i.useState)(!1),Ee=ze[0],De=ze[1],Le=(0,i.useState)(!1),Me=Le[0],qe=Le[1],He=(0,i.useState)(!1),Ge=He[0],Ve=He[1],$e=(0,i.useState)(),Ue=$e[0],Je=$e[1],Qe=(0,i.useState)(!1),Xe=Qe[0],Ye=Qe[1],et=(0,i.useState)("secretKey")[0],tt=(0,i.useState)(!1),nt=tt[0],rt=tt[1],it=(0,i.useState)(),at=it[0],ot=it[1],st=(0,i.useState)(!1),ct=st[0],lt=st[1],ut=(0,i.useState)(),dt=ut[0],pt=ut[1],ft=(0,i.useState)(!1),ht=ft[0],mt=ft[1],xt=(0,u.uI)({onDrop:function(e){Ft(e)},noClick:!0,noKeyboard:!0,disabled:0!==f}),yt=xt.getRootProps,gt=xt.getInputProps,bt=xt.isDragActive,vt=function(){h((function(e){return e+1}))},jt=function(){h((function(e){return e-1})),De(!1),qe(!1),Ve(!1),Ye(!1)},kt=function(){lt(!ct)},Zt=function(){ve(ye=0)},_t=function(){var e=ae(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:t=e.sent,ue=t,we(t),Ye(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ft=function(e){e=Array.from(e),xe=xe.length>0?(xe=xe.concat(e)).filter((function(e,t,n){return t===n.findIndex((function(t){return t.name===e.name&&t.size===e.size}))})):e,ie(xe),wt()},wt=function(){if(xe){var e=xe.reduce((function(e,t){return e+t.size}),0);Ze(e)}},St=function(){var e=ae(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe=re.length,Ct();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=encodeURIComponent(xe[ye].name+".qr");navigator.serviceWorker.ready.then((function(t){t.active.postMessage({cmd:"prepareFileNameEnc",fileName:e})}))},It=function(){var e=ae(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye<=pe-1&&(le=xe[ye],window.open("file","_self"),rt(!0),"publicKey"===ge&&navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"requestEncKeyPair",privateKey:fe,publicKey:he,mode:"derive"})})),"secretKey"===ge&&navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"requestEncryption",password:ue})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Kt=function(e){navigator.serviceWorker.ready.then((function(t){le.slice(0,g.kr).arrayBuffer().then((function(n){de=g.kr,"secretKey"===e&&t.active.postMessage({cmd:"encryptFirstChunk",chunk:n,last:de>=le.size},[n]),"publicKey"===e&&t.active.postMessage({cmd:"asymmetricEncryptFirstChunk",chunk:n,last:de>=le.size},[n])}))}))},Pt=function(){var e=ae(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.V)(Te);case 2:t=e.sent,n=window.location.origin+"/?tab=decryption&publicKey="+t,ot(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=setInterval((function(){navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"pingSW"})}))}),15e3);return function(){return clearInterval(e)}}),[]),(0,i.useEffect)((function(){"encryption"===n.tab&&n.publicKey&&(Ne(n.publicKey),he=n.publicKey,mt(!0),setEncryptionMethod("publicKey"),ge="publicKey")}),[n.publicKey,n.tab]),(0,i.useEffect)((function(){return ne.I.onAuthStateChanged((function(e){s(e)}))}),[]),(0,i.useEffect)((function(){navigator.serviceWorker.addEventListener("message",(function(e){switch(e.data.reply){case"goodKeyPair":h(2);break;case"wrongPrivateKey":qe(!0);break;case"wrongPublicKey":De(!0);break;case"wrongKeyPair":Ve(!0),Je((0,J.F)("invalid_key_pair"));break;case"wrongKeyInput":Ve(!0),Je((0,J.F)("invalid_keys_input"));break;case"keysGenerated":Kt("secretKey");break;case"keyPairReady":Kt("publicKey");break;case"filePreparedEnc":It();break;case"continueEncryption":!function(e){navigator.serviceWorker.ready.then((function(t){le.slice(de,de+g.kr).arrayBuffer().then((function(t){de+=g.kr,e.source.postMessage({cmd:"encryptRestOfChunks",chunk:t,last:de>=le.size},[t])}))}))}(e);break;case"encryptionFinished":pe>1?(ve(ye+=1),le=null,de=null,ye<=pe-1?setTimeout((function(){Ct()}),1e3):(rt(!1),vt())):(rt(!1),vt())}}))}),[]),(0,r.jsxs)("div",se({className:e.root},yt(),{children:[(0,r.jsx)(A.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:ct,autoHideDuration:2e3,onClose:kt,children:(0,r.jsx)(v.Z,{severity:"success",children:dt})}),(0,r.jsx)(N.Z,{open:bt,style:{zIndex:10},children:(0,r.jsxs)(I.Z,{variant:"h2",gutterBottom:!0,style:{color:"#fff",textAlign:"center"},children:[(0,r.jsx)("img",{src:"/assets/images/logo2.png",width:"100",height:"100",alt:"hat.sh logo"}),(0,r.jsx)("br",{}),(0,J.F)("drop_file_enc")]})}),(0,r.jsx)(G.Z,{in:ht,style:{marginTop:5},children:(0,r.jsx)(v.Z,{severity:"success",action:(0,r.jsx)(T.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){mt(!1)},children:(0,r.jsx)(V.Z,{fontSize:"inherit"})}),children:(0,J.F)("recipient_key_loaded")})}),(0,r.jsxs)(Z.Z,{activeStep:f,orientation:"vertical",className:e.stepper,children:[(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(F.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,J.F)("choose_files_enc")}),(0,r.jsxs)(w.Z,{children:[(0,r.jsx)("div",{className:"wrapper p-3",id:"encFileWrapper",children:(0,r.jsxs)("div",{className:e.fileArea,id:"encFileArea",style:{display:re.length>0?"":"flex"},children:[(0,r.jsx)(C.Z,{elevation:0,className:e.filesPaper,children:(0,r.jsx)(Q.Z,{dense:!0,className:e.filesList,children:re.length>0?re.map((function(t,n){return(0,r.jsxs)(X.Z,{className:e.filesListItem,children:[(0,r.jsx)(Y.Z,{className:e.filesListItemText,primary:t.name,secondary:(0,d.t)(t.size)}),(0,r.jsx)(ee.Z,{children:(0,r.jsx)(T.Z,{style:{marginTop:40},onClick:function(){return e=n,xe=ce(xe.slice(0,e)).concat(ce(xe.slice(e+1))),ie(xe),void wt();var e},edge:"end","aria-label":"delete",children:(0,r.jsx)(te.Z,{})})})]},n)})):(0,J.F)("drag_drop_files")})}),(0,r.jsx)("input",se({},gt(),{className:e.input,id:"enc-file",type:"file",onChange:function(e){return Ft(e.target.files)},multiple:!0})),(0,r.jsx)("label",{htmlFor:"enc-file",children:(0,r.jsx)(S.Z,{className:e.browseButton,component:"span",startIcon:re.length>0?(0,r.jsx)($.Z,{}):(0,r.jsx)(D.Z,{}),children:re.length>0?(0,J.F)("add_files"):(0,J.F)("browse_files")})}),re.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{onClick:function(){return ie(xe=[]),void Ze(0)},className:e.resetButton,component:"span",startIcon:(0,r.jsx)(U.Z,{}),children:(0,J.F)("reset")}),(0,r.jsxs)("small",{className:e.filesInfo,children:[re.length," ",re.length>1?(0,J.F)("files"):(0,J.F)("file"),re.length>1&&(0,r.jsxs)(r.Fragment,{children:[", ",(0,d.t)(ke)]})]})]})]})}),(0,r.jsx)("div",{className:e.actionsContainer,children:(0,r.jsx)("div",{children:(0,r.jsx)(S.Z,{fullWidth:!0,disabled:0===re.length,variant:"contained",onClick:vt,className:"".concat(e.nextButton," nextBtnHs submitFile"),children:(0,J.F)("next")})})}),(0,r.jsx)(I.Z,{className:e.offline,children:(0,J.F)("offline_note")})]})]},1),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(F.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:"secretKey"===et?(0,J.F)("enter_password_enc"):(0,J.F)("enter_keys_enc")}),(0,r.jsxs)(w.Z,{children:["secretKey"===et&&(0,r.jsx)(K.Z,{required:!0,error:!!Xe,type:Ce?"text":"password",id:"encPasswordInput",label:(0,J.F)("required"),placeholder:"Password",helperText:Fe?(0,r.jsx)(W.ZP,{title:"".concat((0,J.F)("crackTimeEstimation")," ").concat((0,y.Z)(Fe)[1]),placement:"right",arrow:!0,children:(0,r.jsxs)("span",{children:[(0,J.F)("password_strength"),": ",(0,r.jsx)("strong",{children:(0,y.Z)(Fe)[0]})]})}):(0,J.F)("choose_strong_password"),variant:"outlined",value:Fe||"",onChange:function(e){return t=e.target.value,ue=t,void we(t);var t},fullWidth:!0,InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[Fe&&(0,r.jsx)(W.ZP,{title:(0,J.F)("show_password"),placement:"left",children:(0,r.jsx)(T.Z,{onClick:function(){return Ie(!Ce)},children:Ce?(0,r.jsx)(M.Z,{}):(0,r.jsx)(q.Z,{})})}),(0,r.jsx)(W.ZP,{title:(0,J.F)("generate_password"),placement:"left",children:(0,r.jsx)(T.Z,{onClick:_t,className:"generatePasswordBtn",children:(0,r.jsx)(R.Z,{})})})]})}}),"publicKey"===et&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K.Z,{id:"public-key-input",required:!0,error:!!Ee,label:Ee?(0,J.F)("error"):(0,J.F)("recipient_public_key"),helperText:Ee?(0,J.F)("wrong_public_key"):"",placeholder:(0,J.F)("enter_recipient_public_key"),variant:"outlined",value:Pe||"",onChange:function(e){return t=e.target.value,Ne(t),he=t,void De(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{accept:".public",className:e.input,id:"public-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){Ne(t.result),he=t.result},De(!1)}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"public-key-file",children:(0,r.jsx)(W.ZP,{title:(0,J.F)("load_public_key"),placement:"left",children:(0,r.jsx)(T.Z,{"aria-label":(0,J.F)("load_public_key"),component:"span",children:(0,r.jsx)(O.Z,{})})})})]})}}),(0,r.jsx)(K.Z,{id:"private-key-input",type:Ae?"text":"password",required:!0,error:!!Me,label:Me?(0,J.F)("error"):(0,J.F)("your_private_key_enc"),helperText:Me?(0,J.F)("wrong_private_key"):"",placeholder:(0,J.F)("enter_private_key_enc"),variant:"outlined",value:Te||"",onChange:function(e){return t=e.target.value,Re(t),fe=t,void qe(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[Te&&(0,r.jsx)(W.ZP,{title:(0,J.F)("show_private_key"),placement:"left",children:(0,r.jsx)(T.Z,{onClick:function(){return Oe(!Ae)},children:Ae?(0,r.jsx)(M.Z,{}):(0,r.jsx)(q.Z,{})})}),(0,r.jsx)("input",{accept:".private",className:e.input,id:"private-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){Re(t.result),fe=t.result},qe(!1)}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"private-key-file",children:(0,r.jsx)(W.ZP,{title:(0,J.F)("load_private_key"),placement:"left",children:(0,r.jsx)(T.Z,{"aria-label":(0,J.F)("load_private_key"),component:"span",children:(0,r.jsx)(O.Z,{})})})})]})}}),(0,r.jsx)(p.Z,{})]}),(0,r.jsx)("div",{className:e.actionsContainer,style:{marginTop:15},children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(k.Z,{container:!0,spacing:1,children:[(0,r.jsx)(k.Z,{item:!0,children:(0,r.jsx)(S.Z,{disabled:0===f,onClick:jt,className:e.backButton,fullWidth:!0,children:(0,J.F)("back")})}),(0,r.jsx)(k.Z,{item:!0,xs:!0,children:(0,r.jsx)(S.Z,{disabled:"secretKey"===et&&!Fe||"publicKey"===et&&(!Pe||!Te),variant:"contained",onClick:function(){"secretKey"===ge&&(Fe.length>=12?h(2):Ye(!0)),"publicKey"===ge&&navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"requestEncKeyPair",privateKey:fe,publicKey:he,mode:"test"})}))},className:"".concat(e.nextButton," nextBtnHs submitKeys"),fullWidth:!0,children:(0,J.F)("next")})})]}),(0,r.jsx)("br",{}),"publicKey"===et&&Ge&&(0,r.jsx)(v.Z,{severity:"error",children:Ue}),"secretKey"===et&&Xe&&(0,r.jsx)(v.Z,{severity:"error",children:(0,J.F)("short_password")})]})})]})]},2),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(F.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,J.F)("download_encrypted_files")}),(0,r.jsxs)(w.Z,{children:[re.length>0&&(0,r.jsxs)(v.Z,{severity:"success",icon:(0,r.jsx)(B.Z,{}),children:[(0,r.jsx)("strong",{children:re.length>1?re.length:re[0].name})," ",re.length>1?(0,J.F)("files_ready_to_download"):(0,J.F)("ready_to_download")]}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsxs)(k.Z,{container:!0,spacing:1,children:[(0,r.jsx)(k.Z,{item:!0,children:(0,r.jsx)(S.Z,{disabled:0===f||nt,onClick:jt,className:e.backButton,children:(0,J.F)("back")})}),(0,r.jsx)(k.Z,{item:!0,xs:!0,children:(0,r.jsx)(S.Z,{disabled:nt||!Fe&&!Pe&&!Te||0===re.length,variant:"contained",className:"".concat(e.nextButton," nextBtnHs"),startIcon:nt?(0,r.jsx)(P.Z,{size:24,className:e.buttonProgress}):(0,r.jsx)(L.Z,{}),fullWidth:!0,children:(0,r.jsx)("a",{onClick:function(e){return St(e)},className:"downloadFile",style:{width:"100%",textDecoration:"none"},children:nt?"".concat(be+1,"/").concat(pe," ").concat((0,J.F)("downloading_file")):(0,J.F)("encrypted_files")})})})]}),(0,r.jsx)("br",{}),nt&&(0,r.jsx)(v.Z,{variant:"outlined",severity:"info",children:(0,J.F)("page_close_alert")})]})]})]},3)]}),3===f&&(0,r.jsxs)(C.Z,{elevation:0,className:e.resetContainer,children:[(0,r.jsxs)(v.Z,{variant:"outlined",severity:"success",style:{border:"none"},children:[(0,r.jsx)(j.Z,{children:(0,J.F)("success")}),(0,J.F)("success_downloaded_files_enc"),"publicKey"===et&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,J.F)("after_enc_note_one")}),(0,r.jsx)("li",{children:(0,J.F)("after_enc_note_two")})]})]})]}),(0,r.jsxs)(k.Z,{container:!0,spacing:1,children:["secretKey"===et&&(0,r.jsx)(k.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(S.Z,{onClick:function(){navigator.clipboard.writeText(Fe),pt((0,J.F)("password_copied")),kt()},className:"".concat(e.button," copyPassword"),variant:"outlined",startIcon:(0,r.jsx)(z.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,J.F)("copy_password")})}),"publicKey"===et&&(0,r.jsx)(k.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(W.ZP,{title:(0,J.F)("create_shareable_link_tooltip"),placement:"bottom",children:(0,r.jsx)(S.Z,{onClick:function(){return Pt()},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(H.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,J.F)("create_shareable_link")})})}),(0,r.jsx)(k.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(S.Z,{onClick:function(){h(0),ie([]),we(),Ne(),Re(),fe=null,he=null,De(!1),qe(!1),Ve(!1),Ye(!1),rt(!1),ot(),pt(),mt(!1),Ze(0),le=null,xe=[],pe=0,Zt(),de=null,t.replace(t.pathname)},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(E.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,J.F)("encrypt_more_files")})}),"publicKey"===et&&at&&(0,r.jsx)(K.Z,{style:{marginTop:15},defaultValue:at,InputProps:{readOnly:!0,classes:{root:e.textFieldRoot,focused:e.textFieldFocused,notchedOutline:e.textFieldNotchedOutline},endAdornment:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(W.ZP,{title:(0,J.F)("copy_link"),placement:"left",children:(0,r.jsx)(T.Z,{onClick:function(){navigator.clipboard.writeText(at),pt((0,J.F)("create_shareable_link_copied")),kt()},children:(0,r.jsx)(z.Z,{})})})})},helperText:(0,J.F)("create_shareable_link_note"),variant:"outlined",fullWidth:!0})]})]})]}))}var ve=n(5990),je=n(7315);function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ze(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ze(a,r,i,o,s,"next",e)}function s(e){Ze(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fe(e,t,n[t])}))}return e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"===typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}var Ke,Pe,Ne,Be,Te,Re,We,Ae,Oe=(0,b.Z)((function(e){return{root:{width:"100%"},offline:{fontSize:12,float:"right",color:e.palette.diamondBlack.main},stepper:{backgroundColor:"transparent"},stepIcon:{"&$activeStepIcon":{color:e.palette.emperor.main},"&$completedStepIcon":{color:e.palette.emperor.main}},activeStepIcon:{},completedStepIcon:{},button:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.mercury.light,"&:hover":{backgroundColor:e.palette.mercury.main},transition:"background-color 0.2s ease-out"},browseButton:Fe({padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.alto.light,"&:hover":{backgroundColor:e.palette.alto.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),resetButton:Fe({marginLeft:8,padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.flower.text,backgroundColor:e.palette.flower.main,"&:hover":{backgroundColor:e.palette.flower.light},transition:"background-color 0.2s ease-out"},"transition","color .01s"),backButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.mercury.main},nextButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.primary.main,color:e.palette.white.main,"&:hover":{backgroundColor:e.palette.mineShaft.main},transition:"color .01s"},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3),boxShadow:"rgba(149, 157, 165, 0.4) 0px 8px 24px",borderRadius:"8px"},input:{display:"none"},fileArea:{padding:"20px",border:"5px dashed",borderColor:e.palette.gallery.main,borderRadius:"14px",alignItems:"center",justifyContent:"center",flexDirection:"column",marginBottom:"10px"},filesInfo:Fe({float:"right",marginTop:15,textTransform:"none",color:e.palette.cottonBoll.text,transition:"background-color 0.2s ease-out"},"transition","color .01s"),filesPaper:{marginBottom:15,overflow:"auto",maxHeight:"280px",backgroundColor:"transparent"},filesList:{display:"flex",flex:"1",flexWrap:"wrap",alignContent:"center",justifyContent:"center"},filesListItem:{backgroundColor:"#f3f3f3",borderRadius:"8px",padding:15},filesListItemText:{width:"100px",maxWidth:"150px",minHeight:"50px",maxHeight:"50px"}}})),ze=[],Ee=0;function De(){var e=Oe(),t=(0,a.useRouter)(),n=t.query,o=(0,i.useState)(null),s=(o[0],o[1]),c=(0,i.useState)(0),p=c[0],f=c[1],h=(0,i.useState)([]),m=h[0],x=h[1],y=(0,i.useState)(0),b=y[0],B=y[1],R=(0,i.useState)(),A=R[0],z=R[1],H=(0,i.useState)("secretKey"),re=H[0],ie=H[1],ae=(0,i.useState)(),oe=ae[0],se=ae[1],ce=(0,i.useState)(),le=ce[0],ue=ce[1],de=(0,i.useState)(!1),pe=de[0],fe=de[1],he=(0,i.useState)(!1),me=he[0],xe=he[1],ye=(0,i.useState)(!1),ge=ye[0],be=ye[1],ke=(0,i.useState)(!1),Ze=ke[0],Fe=ke[1],Ie=(0,i.useState)(),De=Ie[0],Le=Ie[1],Me=(0,i.useState)(),qe=Me[0],He=Me[1],Ge=(0,i.useState)(),Ve=Ge[0],$e=Ge[1],Ue=(0,i.useState)(!1),Je=Ue[0],Qe=Ue[1],Xe=(0,i.useState)(!1),Ye=Xe[0],et=Xe[1],tt=(0,i.useState)(!1),nt=tt[0],rt=tt[1],it=(0,i.useState)(!1),at=it[0],ot=it[1],st=(0,i.useState)(!1),ct=st[0],lt=st[1],ut=(0,i.useState)(!1),dt=ut[0],pt=ut[1],ft=(0,i.useState)(!1),ht=ft[0],mt=ft[1],xt=(0,i.useState)(!1),yt=xt[0],gt=xt[1],bt=(0,u.uI)({onDrop:function(e){Ct(e)},noClick:!0,noKeyboard:!0,disabled:0!==p}),vt=bt.getRootProps,jt=bt.getInputProps,kt=bt.isDragActive,Zt=function(){f((function(e){return e+1}))},_t=function(){f((function(e){return e-1})),et(!1),xe(!1),be(!1),Fe(!1),lt(!1),ot(!1)},Ft=function(){B(Ee=0)},wt=function(){B(Ee+=1)},St=function(){He(!1),$e(!1),Qe(!1),Ft(),Re=null},Ct=function(e){e=Array.from(e),ze=ze.length>0?(ze=ze.concat(e)).filter((function(e,t,n){return t===n.findIndex((function(t){return t.name===e.name&&t.size===e.size}))})):e,x(ze),St()},It=function(){var e;Te=ze.length,Ee<=Te-1&&(e=ze[Ee],navigator.serviceWorker.ready.then((function(t){rt(!0),He(!1),$e(!1),Qe(!1),Promise.all([e.slice(0,11).arrayBuffer(),e.slice(0,22).arrayBuffer()]).then((function(e){var n=Se(e,2),r=n[0],i=n[1];t.active.postMessage({cmd:"checkFile",signature:r,legacy:i})}))})))},Kt=function(){Te>1&&(wt(),Ee<=Te-1?It():(f(1),rt(!1),Ft()))},Pt=function(){Qe(!0),rt(!1)},Nt=function(){Te=ze.length,Ee<=Te-1&&Bt(ze[Ee])},Bt=function(e){"secretKey"===Re&&navigator.serviceWorker.ready.then((function(t){ot(!0),et(!1),Promise.all([e.slice(0,11).arrayBuffer(),e.slice(11,27).arrayBuffer(),e.slice(27,51).arrayBuffer(),e.slice(51,51+g.kr+g.G0).arrayBuffer()]).then((function(e){var n=Se(e,4),r=n[0],i=n[1],a=n[2],o=n[3];Ne=o,t.active.postMessage({cmd:"requestTestDecryption",password:Be,signature:r,salt:i,header:a,decFileBuff:Ne})}))})),"publicKey"===Re&&navigator.serviceWorker.ready.then((function(t){lt(!0),Fe(!1),be(!1),xe(!1);Promise.all([e.slice(11,35).arrayBuffer(),e.slice(35,35+g.kr+g.G0).arrayBuffer()]).then((function(e){var n=Se(e,2),r=n[0],i=n[1];Ne=i,t.active.postMessage({cmd:"requestDecKeyPair",privateKey:We,publicKey:Ae,header:r,decFileBuff:Ne,mode:"test"})}))}))},Tt=function(){var e=_e(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Te=m.length,Rt();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=encodeURIComponent((0,ve.K)(ze[Ee].name));navigator.serviceWorker.ready.then((function(t){t.active.postMessage({cmd:"prepareFileNameDec",fileName:e})}))},Wt=function(){var e=_e(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ee<=Te-1&&(Ke=ze[Ee],window.open("file","_self"),mt(!0),"secretKey"===Re&&navigator.serviceWorker.ready.then((function(e){Promise.all([Ke.slice(0,11).arrayBuffer(),Ke.slice(11,27).arrayBuffer(),Ke.slice(27,51).arrayBuffer(),Ke.slice(51,51+g.kr+g.G0).arrayBuffer()]).then((function(t){var n=Se(t,4),r=n[0],i=n[1],a=n[2];n[3];e.active.postMessage({cmd:"requestDecryption",password:Be,signature:r,salt:i,header:a})}))})),"publicKey"===Re&&navigator.serviceWorker.ready.then((function(e){Promise.all([Ke.slice(11,35).arrayBuffer(),Ke.slice(35,35+g.kr+g.G0).arrayBuffer()]).then((function(t){var n=Se(t,2),r=n[0],i=n[1];Ne=i,e.active.postMessage({cmd:"requestDecKeyPair",privateKey:We,publicKey:Ae,header:r,decFileBuff:Ne,mode:"derive"})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),At=function(e){var t;"secretKey"===e&&(t=51),"publicKey"===e&&(t=35),Ke=ze[Ee],navigator.serviceWorker.ready.then((function(e){Ke.slice(t,t+g.kr+g.G0).arrayBuffer().then((function(n){Pe=t+g.kr+g.G0,e.active.postMessage({cmd:"decryptFirstChunk",chunk:n,last:Pe>=Ke.size},[n])}))}))};return(0,i.useEffect)((function(){"decryption"===n.tab&&n.publicKey&&(se(n.publicKey),Ae=n.publicKey,gt(!0),ie("publicKey"),Re="publicKey")}),[n.publicKey,n.tab]),(0,i.useEffect)((function(){return ne.I.onAuthStateChanged((function(e){s(e)}))}),[]),(0,i.useEffect)((function(){navigator.serviceWorker.addEventListener("message",(function(e){switch(e.data.reply){case"badFile":Te>1?(He(ze[Ee].name),rt(!1)):(He(!0),rt(!1));break;case"oldVersion":Te>1?($e(ze[Ee].name),rt(!1)):($e(!0),rt(!1));break;case"secretKeyEncryption":if(Te>1){if(Re&&"secretKey"!==Re)return void Pt();Re="secretKey",ie("secretKey"),Kt()}else ie("secretKey"),Re="secretKey",f(1),rt(!1),Ft();break;case"publicKeyEncryption":if(Te>1){if(Re&&"publicKey"!==Re)return void Pt();Re="publicKey",ie("publicKey"),Kt()}else ie("publicKey"),Re="publicKey",f(1),rt(!1),Ft();break;case"wrongDecPrivateKey":be(!0),lt(!1);break;case"wrongDecPublicKey":xe(!0),lt(!1);break;case"wrongDecKeys":xe(!0),be(!0),lt(!1);break;case"wrongDecKeyPair":Fe(!0),Le((0,J.F)("invalid_key_pair")),lt(!1);break;case"wrongDecKeyInput":Fe(!0),Le((0,J.F)("invalid_keys_input")),lt(!1);break;case"wrongPassword":et(!0),ot(!1);break;case"filePreparedDec":Wt();break;case"readyToDecrypt":Te>1?Te>1&&(wt(),Ee<=Te-1?Nt():(lt(!1),ot(!1),Zt(),Ft())):(lt(!1),ot(!1),Zt(),Ft());break;case"decKeyPairGenerated":At("publicKey");break;case"decKeysGenerated":At("secretKey");break;case"continueDecryption":!function(e){Ke=ze[Ee],navigator.serviceWorker.ready.then((function(t){Ke.slice(Pe,Pe+g.kr+g.G0).arrayBuffer().then((function(t){Pe+=g.kr+g.G0,e.source.postMessage({cmd:"decryptRestOfChunks",chunk:t,last:Pe>=Ke.size},[t])}))}))}(e);break;case"decryptionFinished":Te>1?(wt(),Ke=null,Pe=null,Ee<=Te-1?setTimeout((function(){Rt()}),1e3):(mt(!1),Zt())):(mt(!1),Zt())}}))}),[]),(0,r.jsxs)("div",we({className:e.root},vt(),{children:[(0,r.jsx)(N.Z,{open:kt,style:{zIndex:10},children:(0,r.jsxs)(I.Z,{variant:"h2",gutterBottom:!0,style:{color:"#fff",textAlign:"center"},children:[(0,r.jsx)("img",{src:"/assets/images/logo2.png",width:"100",height:"100",alt:"hat.sh logo"}),(0,r.jsx)("br",{}),(0,J.F)("drop_file_dec")]})}),(0,r.jsx)(G.Z,{in:yt,style:{marginTop:5},children:(0,r.jsx)(v.Z,{severity:"success",action:(0,r.jsx)(T.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){gt(!1)},children:(0,r.jsx)(V.Z,{fontSize:"inherit"})}),children:(0,J.F)("sender_key_loaded")})}),(0,r.jsxs)(Z.Z,{activeStep:p,orientation:"vertical",className:e.stepper,children:[(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(F.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,J.F)("choose_files_dec")}),(0,r.jsxs)(w.Z,{children:[(0,r.jsx)("div",{className:"wrapper p-3",id:"decFileWrapper",children:(0,r.jsxs)("div",{className:e.fileArea,id:"decFileArea",style:{display:m.length>0?"":"flex"},children:[(0,r.jsx)(C.Z,{elevation:0,className:e.filesPaper,children:(0,r.jsx)(Q.Z,{dense:!0,className:e.filesList,children:m.length>0?m.map((function(t,n){return(0,r.jsxs)(X.Z,{className:e.filesListItem,children:[(0,r.jsx)(Y.Z,{className:e.filesListItemText,primary:t.name,secondary:(0,d.t)(t.size)}),(0,r.jsx)(ee.Z,{children:(0,r.jsx)(T.Z,{style:{marginTop:40},onClick:function(){return e=n,ze=Ce(ze.slice(0,e)).concat(Ce(ze.slice(e+1))),x(ze),void St();var e},edge:"end","aria-label":"delete",children:(0,r.jsx)(te.Z,{})})})]},n)})):(0,J.F)("drag_drop_files")})}),(0,r.jsx)("input",we({},jt(),{className:e.input,id:"dec-file",type:"file",onChange:function(e){return Ct(e.target.files)},multiple:!0})),(0,r.jsx)("label",{htmlFor:"dec-file",children:(0,r.jsx)(S.Z,{className:e.browseButton,component:"span",startIcon:m.length>0?(0,r.jsx)($.Z,{}):(0,r.jsx)(D.Z,{}),children:m.length>0?(0,J.F)("add_files"):(0,J.F)("browse_files")})}),m.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{onClick:function(){return x(ze=[]),void St()},className:e.resetButton,component:"span",startIcon:(0,r.jsx)(U.Z,{}),children:(0,J.F)("reset")}),(0,r.jsxs)("small",{className:e.filesInfo,children:[m.length," ",m.length>1?(0,J.F)("files"):(0,J.F)("file")]})]})]})}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsx)("div",{children:(0,r.jsx)(S.Z,{disabled:nt||0===m.length,variant:"contained",onClick:It,className:"".concat(e.nextButton," nextBtnHs submitFileDec"),startIcon:nt&&(0,r.jsx)(P.Z,{size:24,className:e.buttonProgress}),fullWidth:!0,children:nt?(0,J.F)("checking_file"):(0,J.F)("next")})}),qe&&(0,r.jsxs)(v.Z,{severity:"error",style:{marginTop:15},children:[(0,J.F)("file_not_encrypted_corrupted"),(0,r.jsx)("br",{}),m.length>1?(0,r.jsx)("strong",{children:qe}):""]}),Ve&&(0,r.jsxs)(v.Z,{severity:"error",style:{marginTop:15},children:[(0,J.F)("old_version")," ",(0,r.jsx)("a",{href:"https://v1.hat.sh/",target:"_blank",rel:"noreferrer",children:"https://v1.hat.sh"}),(0,r.jsx)("br",{}),m.length>1?(0,r.jsx)("strong",{children:Ve}):""]}),Je&&(0,r.jsx)(v.Z,{severity:"error",style:{marginTop:15},children:(0,J.F)("file_mixup")})]}),!qe&&!Ve&&!Je&&(0,r.jsx)(I.Z,{className:e.offline,children:(0,J.F)("offline_note")})]})]},1),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(F.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:"secretKey"===re?(0,J.F)("enter_password_dec"):(0,J.F)("enter_keys_dec")}),(0,r.jsxs)(w.Z,{children:["secretKey"===re&&(0,r.jsx)(K.Z,{required:!0,type:dt?"text":"password",error:!!Ye,id:Ye?"outlined-error-helper-text":"outlined-required",className:"decPasswordInput",label:Ye?(0,J.F)("error"):(0,J.F)("required"),helperText:Ye?(0,J.F)("wrong_password"):"",placeholder:"Password",variant:"outlined",value:A||"",onChange:function(e){return t=e.target.value,z(t),Be=t,void et(!1);var t},fullWidth:!0,InputProps:{endAdornment:(0,r.jsx)(W.ZP,{title:(0,J.F)("show_password"),placement:"left",children:(0,r.jsx)(T.Z,{onClick:function(){return pt(!dt)},children:dt?(0,r.jsx)(M.Z,{}):(0,r.jsx)(q.Z,{})})})}}),"publicKey"===re&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K.Z,{id:"public-key-input-dec",required:!0,error:!(!me&&!Ze),helperText:me?(0,J.F)("wrong_public_key"):"",label:(0,J.F)("sender_public_key"),placeholder:(0,J.F)("enter_sender_public_key"),variant:"outlined",value:oe||"",onChange:function(e){return t=e.target.value,se(t),Ae=t,void xe(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{accept:".public",className:e.input,id:"dec-public-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){se(t.result),Ae=t.result}}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"dec-public-key-file",children:(0,r.jsx)(W.ZP,{title:(0,J.F)("load_public_key"),placement:"left",children:(0,r.jsx)(T.Z,{"aria-label":(0,J.F)("load_public_key"),component:"span",children:(0,r.jsx)(O.Z,{})})})})]})}}),(0,r.jsx)(K.Z,{id:"private-key-input-dec",type:pe?"text":"password",required:!0,error:!(!ge&&!Ze),helperText:ge?(0,J.F)("wrong_private_key"):"",label:(0,J.F)("your_private_key_dec"),placeholder:(0,J.F)("enter_private_key_dec"),variant:"outlined",value:le||"",onChange:function(e){return t=e.target.value,ue(t),We=t,void be(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[le&&(0,r.jsx)(W.ZP,{title:(0,J.F)("show_private_key"),placement:"left",children:(0,r.jsx)(T.Z,{onClick:function(){return fe(!pe)},children:pe?(0,r.jsx)(M.Z,{}):(0,r.jsx)(q.Z,{})})}),(0,r.jsx)("input",{accept:".private",className:e.input,id:"dec-private-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){ue(t.result),We=t.result}}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"dec-private-key-file",children:(0,r.jsx)(W.ZP,{title:(0,J.F)("load_private_key"),placement:"left",children:(0,r.jsx)(T.Z,{"aria-label":(0,J.F)("load_private_key"),component:"span",children:(0,r.jsx)(O.Z,{})})})})]})}})]}),(0,r.jsx)("div",{className:e.actionsContainer,children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(k.Z,{container:!0,spacing:1,children:[(0,r.jsx)(k.Z,{item:!0,children:(0,r.jsx)(S.Z,{disabled:0===p||at||ct,onClick:_t,className:e.backButton,fullWidth:!0,children:(0,J.F)("back")})}),(0,r.jsx)(k.Z,{item:!0,xs:!0,children:(0,r.jsx)(S.Z,{disabled:"secretKey"===re&&!A||"publicKey"===re&&(!oe||!le)||at||ct,variant:"contained",onClick:Nt,className:"".concat(e.nextButton," nextBtnHs submitKeysDec"),startIcon:(at||ct)&&(0,r.jsx)(P.Z,{size:24,className:e.buttonProgress}),fullWidth:!0,children:at?"".concat(b+1,"/").concat(Te," ").concat((0,J.F)("testing_password")):ct?"".concat(b+1,"/").concat(Te," ").concat((0,J.F)("testing_keys")):(0,J.F)("next")})})]}),(0,r.jsx)("br",{}),"secretKey"===re&&m.length>1&&Ye&&!at&&(0,r.jsxs)(v.Z,{severity:"error",children:[(0,r.jsx)("strong",{children:m[Ee].name})," ",(0,J.F)("file_has_wrong_password")]}),"publicKey"===re&&Ze&&(0,r.jsx)(v.Z,{severity:"error",children:De}),"publicKey"===re&&(ge||me)&&!ct&&!Ze&&(0,r.jsx)(r.Fragment,{children:m.length>1&&(0,r.jsxs)(v.Z,{severity:"error",children:[(0,r.jsx)("strong",{children:m[Ee].name})," ",(0,J.F)("file_has_wrong_keys")]})})]})})]})]},2),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(F.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,J.F)("download_decrypted_files")}),(0,r.jsxs)(w.Z,{children:[m.length>0&&(0,r.jsxs)(v.Z,{severity:"success",icon:(0,r.jsx)(je.Z,{}),children:[(0,r.jsx)("strong",{children:m.length>1?m.length:m[0].name})," ",m.length>1?(0,J.F)("files_ready_to_download"):(0,J.F)("ready_to_download")]}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsxs)(k.Z,{container:!0,spacing:1,children:[(0,r.jsx)(k.Z,{item:!0,children:(0,r.jsx)(S.Z,{disabled:0===p||ht,onClick:_t,className:e.backButton,children:(0,J.F)("back")})}),(0,r.jsx)(k.Z,{item:!0,xs:!0,children:(0,r.jsx)(S.Z,{disabled:ht||!A&&!oe&&!le||0===m.length,variant:"contained",color:"primary",className:"".concat(e.nextButton," nextBtnHs"),startIcon:ht?(0,r.jsx)(P.Z,{size:24,className:e.buttonProgress}):(0,r.jsx)(L.Z,{}),fullWidth:!0,children:(0,r.jsx)("a",{onClick:function(e){return Tt(e)},className:"downloadFileDec",style:{width:"100%",textDecoration:"none"},children:ht?"".concat(b+1,"/").concat(Te," ").concat((0,J.F)("downloading_file")):(0,J.F)("decrypted_files")})})})]}),(0,r.jsx)("br",{}),ht&&(0,r.jsx)(v.Z,{variant:"outlined",severity:"info",children:(0,J.F)("page_close_alert")})]})]})]},3)]}),3===p&&(0,r.jsxs)(C.Z,{elevation:1,className:e.resetContainer,children:[(0,r.jsxs)(v.Z,{variant:"outlined",severity:"success",style:{border:"none"},children:[(0,r.jsx)(j.Z,{children:(0,J.F)("success")}),(0,J.F)("success_downloaded_files_dec")]}),(0,r.jsx)(S.Z,{onClick:function(){f(0),x([]),z(),et(!1),He(!1),$e(!1),Qe(!1),se(),ue(),We=null,Ae=null,xe(!1),be(!1),Fe(!1),gt(!1),Ke=null,Pe=null,ze=[],Te=0,Ft(),t.replace(t.pathname)},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(E.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,J.F)("decrypt_other_files")})]})]}))}var Le=n(2543),Me=n(5258),qe=n(3832),He=n(7821),Ge=n(1423);function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ve(e,t,n[t])}))}return e}function Ue(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Je=(0,Le.Z)({indicator:{display:"none"}})((function(e){return(0,r.jsx)(He.Z,$e({},e,{TabIndicatorProps:{children:(0,r.jsx)("span",{})}}))})),Qe=(0,Le.Z)((function(e){return{root:{textTransform:"none",padding:"8px",transition:"background-color 0.2s ease-out","&$selected":{backgroundColor:e.palette.white.main,boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px",borderRadius:"8px"}},selected:{}}}))((function(e){return(0,r.jsx)(Ge.Z,$e({disableRipple:!0},e))})),Xe=(0,b.Z)((function(e){return{root:{maxWidth:"768px"},bar:{marginTop:35,backgroundColor:e.palette.gallery.main,borderRadius:"8px",padding:8},TabPanel:{marginTop:15},tab:{color:e.palette.mineShaft.main}}}));function Ye(e){var t=e.children,n=e.value,i=e.index,a=Ue(e,["children","value","index"]);return(0,r.jsx)("div",$e({component:"div",role:"tabpanel",hidden:n!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i)},a,{children:t}))}function et(){var e=Xe(),t=(0,a.useRouter)(),n=t.query,o=(0,i.useState)(0),s=o[0],c=o[1],l={tab:0,label:(0,J.F)("encryption")},u={tab:1,label:(0,J.F)("decryption")};return(0,i.useEffect)((function(){n.tab&&"encryption"===n.tab&&c(l.tab),n.tab&&"decryption"===n.tab&&c(u.tab)}),[u.tab,l.tab,n.tab]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(qe.Z,{className:e.root,children:[(0,r.jsx)(Me.Z,{position:"static",className:e.bar,elevation:0,children:(0,r.jsxs)(Je,{value:s,onChange:function(e,n){c(n),t.replace(t.pathname)},variant:"fullWidth",centered:!0,children:[(0,r.jsx)(Qe,{label:l.label,className:e.tab}),(0,r.jsx)(Qe,{label:u.label,className:e.tab})]})}),(0,r.jsx)(Ye,{value:s,index:l.tab,className:e.TabPanel,children:(0,r.jsx)(be,{})}),(0,r.jsx)(Ye,{value:s,index:u.tab,className:e.TabPanel,children:(0,r.jsx)(De,{})})]})})}Ye.propTypes={children:s().node,index:s().any.isRequired,value:s().any.isRequired}}}]);